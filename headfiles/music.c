#include "music.h"
#include "tim.h"
#include "gpio.h"
#include "stm32f1xx_hal.h"
const uint16_t tone[] ={3817,3401,3030,2865,2552,2272,2024,//do~xi 0-6 低音
//											0	  1     2    3    4    5    6
												1912,1703,1517,1432,1275,1136,1012,//7-13 中音
//							 				7     8    9   10    11   12   13
												956,  851,758, 715,  637,568, 506,	0};//14-20 高音
//											14    15   16   17    18  19   20		21
uint8_t music_tone[344] = {		//	音符名称
															5,7,11,7,3,4,5,11,7,  0,4,11,7,0,11,6,11,  5,7,11,5,3,4,5,11,7,  0,4,11,7,0,11,6,7,11,		//35
															5,7,11,7,3,4,5,11,7,  0,4,11,7,0,11,6,11,  5,7,11,5,3,4,5,11,7,  0,4,11,7,0,11,6,7,11,		//35
															21,11,11,7,7,8,9, 21,11,11,7,7,8,9,8,7,4, 21,11,11,7,7,8,9 ,21,9,8,9,10,9,8,11,9,8,7,//31+4
															4,7,11,9,10,9,8,7,8,9,9,9,9,8,9,8,7,4,7,8,9,10,9,8,7,8,9,9,9,9,8,9,8,7,6,//35
															7,7,7,7,6,7,7,7,7,7,7,6,7,7,7,7,7,7,6,7,7,7,7,7,7,11,11,11,//28
															11,11,11,11,11,11,11,11,11,11,11,10,9,9,//14
															9,21,21,7,7,7,7,5,6,7,11,10,9,7,7,//15
															7,21,7,7,7,7,9,7,5,6,7,11,10,9,7,8,//16
															8,21,21,21,9,8,10,9,9,7,11,3,//12
															14,13,11,7,7,7,7,12,12,21,12,11,11,11,11,10,9,//17
															8,9,10,9,9,21,9,10,11,9,9,10,11,13,//14
															15,13,14,14,14,21,14,14,11,11,12,11,10,10,8,9,//16	
															10,11,12,7,12,13,13,9,8,10,9,9,7,11,3,//15
															14,13,11,7,7,7,7,12,12,21,12,11,11,11,11,10,9,//17
															8,9,10,9,9,21,9,10,11,9,9,10,11,13,//14
															15,13,14,14,14,21,14,//7
															14,11,11,12,11,10,5,6,7,8,9,8,8,9,7,//15
															7,21,21,21,//4
															
	};
	uint8_t music_time[344] = {	//	音符时间
														 2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,2,//35
														 2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,2,//35
														 2, 2, 2, 2,4,2,2, 2, 2, 2, 2,2,1,1,1,1,2, 2, 2, 2, 2,4,2,2, 2, 4,1,1,1, 1,1,1, 1,1,2,//31+4
								2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,4,//17
								2,2,2,2,2,2,2,1,1,2,2,2,2,1,1,2,3,1,//18
								1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,1,1,1,1,1,2,1,//28
								1,1,1,1,2,1,1,1,1,1,1,1,1,1,//14
								4,4,4,1,1,1,1,2,2,2,2,2,2,2,2,//15
								4,4,1,1,1,1,2,2,2,2,2,2,2,2,2,2,//16
								4,4,4,4,2,2,2,2,2,2,2,2,//12
								2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,//17
								2,2,2,2,4,4,2,2,2,2,2,2,2,2,//14
								2,2,2,2,4,2,2,2,2,2,2,1,1,2,2,2,//16
								2,2,2,2,3,1,4,2,2,2,2,2,2,2,2,//15
								2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,//17
								2,2,2,2,4,4,2,2,2,2,2,2,2,2,//14
								2,2,2,2,4,2,2,//7
								2,2,2,2,2,2,2,2,2,2,2,2,4,2,2,//15
								2,2,2,2,//4					
	};	
void set_pwm(uint16_t period, uint16_t pulse)
{
	__HAL_TIM_SET_AUTORELOAD(&htim2,period);		//	设置频率
	__HAL_TIM_SetCompare(&htim2,TIM_CHANNEL_4,pulse);				//	设置占空比

}

